# ==============================================================================
# SenTient JVM Configuration (refine.ini)
# ==============================================================================
# This file controls the Java Virtual Machine settings for the Core Orchestrator.
# It is read by the 'refine' shell script during startup.
# ==============================================================================

# ------------------------------------------------------------------------------
# 1. MEMORY ALLOCATION
# ------------------------------------------------------------------------------
# The "Hybrid Memory Architecture" offloads heavy AI vectors to DuckDB (Sidecar),
# so we no longer need massive RAM for large datasets.
# However, to support "Instant Faceting" for 100k+ rows in <10ms, we dedicate
# 4GB to the Heap for "Hot Data" (Row IDs, Status Flags, Raw Text).
#
# Recommended: 4096M (4GB)
# Minimum: 1024M (1GB)
REFINE_MEMORY=4096M

# ------------------------------------------------------------------------------
# 2. GARBAGE COLLECTION & PERFORMANCE
# ------------------------------------------------------------------------------
# We use the G1 Garbage Collector to minimize "Stop-the-world" pauses during 
# heavy batch reconciliation.
#
# -XX:+UseG1GC            : Enables G1 Garbage Collector (Required for low latency)
# -XX:MaxGCPauseMillis=200: Targets a maximum pause of 200ms to keep UI responsive
# -Drefine.headless=true  : Disables AWT/Swing to save resources on headless servers
# -Drefine.port=3333      : Explicitly binds the HTTP port (Matches environment.json)
JAVA_OPTIONS=-XX:+UseG1GC -XX:MaxGCPauseMillis=200 -Drefine.headless=true -Drefine.port=3333

# ------------------------------------------------------------------------------
# 3. SYSTEM PROPERTIES
# ------------------------------------------------------------------------------
# Defines the location of the configuration registry.
# The Orchestrator reads 'butterfly.properties' to find the Python and Solr layers.
JAVA_OPTIONS=$JAVA_OPTIONS -Dbutterfly.properties.path=config/core/butterfly.properties